Make name resolution be a method of Statement and Declaration.
Implement type inference.
Implement mode checking.
Test type checking.

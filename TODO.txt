Make name resolution be a type parameter again.
Make name resolution be a method of AST and Type by making it parametric.